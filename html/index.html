<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grace Waves Christian Radio - Broadcasting Hope and Inspiration</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/engagement.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <header class="main-header">
        <div class="container">
            <div class="logo">
                <a href="index.html">
                    <h1>Grace Waves</h1>
                    <span>Christian Radio</span>
                </a>
            </div>
            <nav class="main-nav">
                <ul>
                    <li><a href="index.html" class="active">Home</a></li>
                    <li><a href="shows.html">Shows</a></li>
                    <li><a href="schedule.html">Schedule</a></li>
                    <li><a href="about.html">About</a></li>
                    <li><a href="contact.html">Contact</a></li>
                </ul>
            </nav>
            <div class="header-actions">
                <a href="admin/login.html" class="login-button" id="login-button">Login</a>
                <button class="nav-toggle" id="nav-toggle">
                    <span class="bar"></span>
                    <span class="bar"></span>
                    <span class="bar"></span>
                </button>
            </div>
        </div>
    </header>
    
    <section class="hero-section">
        <div class="container">
            <div class="hero-content">
                <h1>Broadcasting Hope and Inspiration</h1>
                <p>Uplifting hearts and nurturing spirits through Christ-centered music and messages</p>
                <a href="#listen-section" class="cta-button">Listen Now</a>
            </div>
        </div>
        <div class="wave-overlay"></div>
    </section>
    
    <section id="listen-section" class="listen-section">
        <div class="container">
            <div class="section-header">
                <h2>Listen Live</h2>
                <p>Experience uplifting Christian music and messages 24/7</p>
            </div>
            <div class="player-container">
                <div class="player">
                    <div class="player-controls">
                        <button id="play-button" class="play-button">
                            <i class="fas fa-play"></i>
                        </button>
                        <div class="volume-control">
                            <input type="range" id="volume-slider" min="0" max="100" value="80">
                            <i class="fas fa-volume-up"></i>
                        </div>
                    </div>
                    <div class="player-info">
                        <div class="stream-info">
                            <h3 class="stream-title">Grace Waves Radio</h3>
                            <p class="now-playing">Now Playing...</p>
                        </div>
                    </div>
                </div>
                <audio id="audio-player" preload="auto"></audio>
            </div>
        </div>
    </section>
    
    <section class="upcoming-section">
        <div class="container">
            <div class="section-header">
                <h2>Coming Up Next</h2>
                <p>Don't miss these upcoming shows</p>
            </div>
            <div class="upcoming-shows" id="upcoming-shows">
                <div class="loading">
                    <div class="spinner"></div>
                    <p>Loading upcoming shows...</p>
                </div>
            </div>
            <div class="section-action">
                <a href="schedule.html" class="btn">View Full Schedule</a>
            </div>
        </div>
    </section>
    
    <section class="featured-section">
        <div class="container">
            <div class="section-header">
                <h2>Featured Shows</h2>
                <p>Discover our most popular programs</p>
            </div>
            <div class="featured-shows" id="featured-shows">
                <div class="loading">
                    <div class="spinner"></div>
                    <p>Loading featured shows...</p>
                </div>
            </div>
            <div class="section-action">
                <a href="shows.html" class="btn">Explore All Shows</a>
            </div>
        </div>
    </section>
    
    <section class="verse-section">
        <div class="container">
            <div class="verse-container">
                <h2>Daily Verse</h2>
                <div class="verse-content">
                    <p class="verse-text">"For God so loved the world, that he gave his only Son, that whoever believes in him should not perish but have eternal life."</p>
                    <p class="verse-reference">John 3:16</p>
                </div>
            </div>
        </div>
    </section>
    
    <footer class="main-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <h2>Grace Waves</h2>
                    <p>Broadcasting Hope and Inspiration</p>
                </div>
                <div class="footer-links">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="shows.html">Shows</a></li>
                        <li><a href="schedule.html">Schedule</a></li>
                        <li><a href="about.html">About Us</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-subscribe">
                    <h3>Stay Connected</h3>
                    <p>Subscribe to our newsletter for updates</p>
                    <form id="subscribe-form">
                        <input type="email" placeholder="Your Email Address" required>
                        <button type="submit">Subscribe</button>
                    </form>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Grace Waves Christian Radio. All Rights Reserved.</p>
                <div class="social-icons">
                    <a href="#" class="social-icon"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" class="social-icon"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="social-icon"><i class="fab fa-instagram"></i></a>
                    <a href="#" class="social-icon"><i class="fab fa-youtube"></i></a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Global variables for current user -->
    <script>
        let currentUserId = null;
        let isAdmin = false;
    </script>

    <!-- Main Scripts -->
    <script src="js/main.js"></script>
    <script src="js/player.js"></script>
    <script src="js/schedule.js"></script>
    <script src="js/engagement.js"></script>
    <script src="js/player-engagement.js"></script>
    
    <script>
        // Check login status
        function checkLoginStatus() {
            fetch('/api/user-status.php')
                .then(response => response.json())
                .then(data => {
                    if (data.loggedIn) {
                        currentUserId = data.userId;
                        isAdmin = data.role === 'admin';
                        
                        // Update login button
                        const loginButton = document.getElementById('login-button');
                        loginButton.textContent = 'Dashboard';
                        loginButton.href = 'admin/dashboard.html';
                    }
                })
                .catch(error => console.error('Error checking login status:', error));
        }
        
        // Load featured shows
        async function loadFeaturedShows() {
            try {
                const response = await fetch('/api/shows/featured.php');
                const shows = await response.json();
                
                const featuredShowsContainer = document.getElementById('featured-shows');
                
                if (shows.length === 0) {
                    featuredShowsContainer.innerHTML = '<p class="no-shows">No featured shows available.</p>';
                    return;
                }
                
                let featuredShowsHtml = '';
                
                shows.forEach(show => {
                    featuredShowsHtml += `
                        <div class="show-card">
                            <div class="show-image">
                                <img src="${show.cover_image || 'images/default-show.jpg'}" alt="${show.title}">
                            </div>
                            <div class="show-info">
                                <h3>${show.title}</h3>
                                <p class="show-host">Hosted by ${show.host}</p>
                                <p class="show-description">${show.description.substring(0, 100)}${show.description.length > 100 ? '...' : ''}</p>
                                <a href="show.html?id=${show.id}" class="show-link">View Details</a>
                            </div>
                        </div>
                    `;
                });
                
                featuredShowsContainer.innerHTML = featuredShowsHtml;
                
            } catch (error) {
                console.error('Error loading featured shows:', error);
                document.getElementById('featured-shows').innerHTML = `
                    <p class="error-message">Unable to load featured shows. Please try again later.</p>
                `;
            }
        }
        
        // Generate a random verse
        function setRandomVerse() {
            const verses = [
                { text: "For I know the plans I have for you, declares the LORD, plans for welfare and not for evil, to give you a future and a hope.", reference: "Jeremiah 29:11" },
                { text: "Trust in the LORD with all your heart, and do not lean on your own understanding. In all your ways acknowledge him, and he will make straight your paths.", reference: "Proverbs 3:5-6" },
                { text: "I can do all things through him who strengthens me.", reference: "Philippians 4:13" },
                { text: "Be strong and courageous. Do not fear or be in dread of them, for it is the LORD your God who goes with you. He will not leave you or forsake you.", reference: "Deuteronomy 31:6" },
                { text: "The LORD is my shepherd; I shall not want. He makes me lie down in green pastures. He leads me beside still waters. He restores my soul.", reference: "Psalm 23:1-3" }
            ];
            
            const randomIndex = Math.floor(Math.random() * verses.length);
            const verse = verses[randomIndex];
            
            document.querySelector('.verse-text').textContent = `"${verse.text}"`;
            document.querySelector('.verse-reference').textContent = verse.reference;
        }
        
        // Initialize page
        document.addEventListener('DOMContentLoaded', () => {
            checkLoginStatus();
            loadFeaturedShows();
            setRandomVerse();
        });
    </script>
</body>
</html>